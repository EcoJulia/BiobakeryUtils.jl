<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Getting Started · BiobakeryUtils.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link rel="canonical" href="http://docs.ecojulia.org/BiobakeryUtils.jl/stable/gettingstarted/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">BiobakeryUtils.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">BiobakeryUtils</a></li><li class="is-active"><a class="tocitem" href>Getting Started</a><ul class="internal"><li><a class="tocitem" href="#Installing-julia"><span>Installing julia</span></a></li><li><a class="tocitem" href="#Making-a-project"><span>Making a project</span></a></li><li><a class="tocitem" href="#Using-bioBakery-command-line-tools"><span>Using <code>bioBakery</code> command line tools</span></a></li><li><a class="tocitem" href="#Using-MetaPhlAn-and-HUMAnN"><span>Using MetaPhlAn and HUMAnN</span></a></li><li><a class="tocitem" href="#Troubleshooting"><span>Troubleshooting</span></a></li></ul></li><li><a class="tocitem" href="../kneaddata/">Working with KneadData</a></li><li><a class="tocitem" href="../metaphlan/">Working with MetaPhlAn</a></li><li><a class="tocitem" href="../humann/">Working with HUMAnN</a></li><li><a class="tocitem" href="../microbiome/">Microbiome.jl Docstrings</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Getting Started</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Getting Started</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/EcoJulia/BiobakeryUtils.jl/blob/main/docs/src/gettingstarted.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="getting-started"><a class="docs-heading-anchor" href="#getting-started">Getting Started</a><a id="getting-started-1"></a><a class="docs-heading-anchor-permalink" href="#getting-started" title="Permalink"></a></h1><p>This is a package for the <a href="http://julialang.org">julia programming language</a>, designed for working with the <a href="https://github.com/biobakery/biobakery">bioBakery</a> family of tools for metagenomic analysis of microbial communities. Currently, we support <a href="https://github.com/biobakery/MetaPhlAn"><code>MetaPhlAn</code></a> and <a href="https://github.com/biobakery/HUMAnN"><code>HUMAnN</code></a>.</p><p>Read on to learn how to install the package and use it to begin using it to uncover insights about your microbial community data! If you run into problems, you can <a href="https://github.com/EcoJulia/BiobakeryUtils.jl/issues/new/choose">open an issue</a> on this repository, or start a discussion over on <a href="https://github.com/EcoJulia/Microbiome.jl/discussions/new"><code>Microbiome.jl</code></a>.</p><h2 id="Installing-julia"><a class="docs-heading-anchor" href="#Installing-julia">Installing julia</a><a id="Installing-julia-1"></a><a class="docs-heading-anchor-permalink" href="#Installing-julia" title="Permalink"></a></h2><p>If this is your first time using julia, you&#39;ll need to install it by going to the <a href="https://julialang.org/downloads/">julia downloads page</a> and following the instructions for your platform. <code>BiobakeryUtils.jl</code> should work on any julia version &gt;= 1.6.0.</p><p>Alternatively, you can you <a href="https://github.com/johnnychen94/jill.py"><code>jill.py</code></a>, which is an easy-to-use python utility for installing julia.</p><h3 id="Launching-julia-from-the-terminal"><a class="docs-heading-anchor" href="#Launching-julia-from-the-terminal">Launching julia from the terminal</a><a id="Launching-julia-from-the-terminal-1"></a><a class="docs-heading-anchor-permalink" href="#Launching-julia-from-the-terminal" title="Permalink"></a></h3><p>If you download the &quot;app&quot; versions of julia from the downloads page above, you may also want to add <code>julia</code> to your shell&#39;s <code>$PATH</code> so that you can launch it from your terminal. For windows users, you can look <a href="https://julialang.org/downloads/platform/#adding_julia_to_path_on_windows_10">look here</a> for instructions. Mac users, <a href="https://julialang.org/downloads/platform/#optional_add_julia_to_path">see here</a> for instructions.</p><h2 id="Making-a-project"><a class="docs-heading-anchor" href="#Making-a-project">Making a project</a><a id="Making-a-project-1"></a><a class="docs-heading-anchor-permalink" href="#Making-a-project" title="Permalink"></a></h2><p>In julia, it&#39;s typically a good idea to use <a href="https://pkgdocs.julialang.org/v1/environments/">&quot;projects&quot;</a> to organize your package dependencies (this is similar to &quot;environments&quot; that <code>conda</code> uses).</p><p>To do this, make a directory and &quot;activate&quot; it in the julia Pkg REPL.</p><pre><code class="language-sh hljs">$ mkdir my_project

$ cd my_project

$ julia

               _
   _       _ _(_)_     |  Documentation: https://docs.julialang.org
  (_)     | (_) (_)    |
   _ _   _| |_  __ _   |  Type &quot;?&quot; for help, &quot;]?&quot; for Pkg help.
  | | | | | | |/ _` |  |
  | | |_| | | | (_| |  |  Version 1.6.1 (2021-04-23)
 _/ |\__&#39;_|_|_|\__&#39;_|  |  Official https://julialang.org/ release
|__/                   |

julia&gt; # press ] to enter the Pkg REPL

(@v1.6) pkg&gt; activate .
  Activating new environment at `~/my_project/Project.toml`

(my_project) pkg&gt; # press backspace to get back to julia REPL

julia&gt;</code></pre><p><a href="https://asciinema.org/a/440135"><img src="https://asciinema.org/a/440135.svg" alt="asciicast"/></a></p><p>So far, this is still just an empty directory, but you can also use the Pkg REPL to install packages, like <code>BiobakeryUtils.jl</code>.</p><pre><code class="language-sh hljs">(my_project) pkg&gt; add BiobakeryUtils</code></pre><p><a href="https://asciinema.org/a/8vMgAdlGV63VztAGhUAlGQ5ai"><img src="https://asciinema.org/a/8vMgAdlGV63VztAGhUAlGQ5ai.svg" alt="asciicast"/></a></p><p>Once this process completes, the directory will now contain a <code>Project.toml</code> file that contains <code>BiobakeryUtils.jl</code> as a dependency, and a <code>Manifest.toml</code> file that contains all of the exact info about dependencies installed for this environment.</p><p>In the future, you can launch julia with the environment already activated using <code>julia --project</code> if your working directory is <code>my_project/</code>, or <code>julia --project=&lt;path to project&gt;</code> if you&#39;re in a different working directory (eg. <code>julia --project=~/my_project</code> if <code>my_project/</code> is in the home directory).</p><h2 id="Using-bioBakery-command-line-tools"><a class="docs-heading-anchor" href="#Using-bioBakery-command-line-tools">Using <code>bioBakery</code> command line tools</a><a id="Using-bioBakery-command-line-tools-1"></a><a class="docs-heading-anchor-permalink" href="#Using-bioBakery-command-line-tools" title="Permalink"></a></h2><p>Some functions provided by this package (eg <a href="../humann/#BiobakeryUtils.humann_regroup-Tuple{CommunityProfile}"><code>humann_regroup</code></a> and <a href="../humann/#BiobakeryUtils.humann_rename-Tuple{CommunityProfile}"><code>humann_rename</code></a>), require the appropriate <code>bioBakery</code> tools to be installed and accessible from the julia <code>shell</code> environment. The easiest way to do this is to use <code>Conda.jl</code>, though other installation methods are possible as well.</p><h3 id="Using-a-previous-installation"><a class="docs-heading-anchor" href="#Using-a-previous-installation">Using a previous installation</a><a id="Using-a-previous-installation-1"></a><a class="docs-heading-anchor-permalink" href="#Using-a-previous-installation" title="Permalink"></a></h3><p>If you have a previous installation of <code>metaphlan</code> and/or <code>humann</code>, you can tell julia to use them by modifying the <code>$PATH</code> environment variable.</p><p>Environment variables in julia are stored in a <code>Dict</code> called <code>ENV</code>. For example, the <code>$PATH</code> variable in Unix tells the shell where to look for executable programs, and is available in julia using <code>ENV[&quot;PATH&quot;]</code></p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; ENV[&quot;PATH&quot;]</code><code class="nohighlight hljs ansi" style="display:block;">&quot;/home/runner/.local/bin:/opt/pipx_bin:/home/runner/.cargo/bin:/home/runner/.config/composer/vendor/bin:/usr/local/.ghcup/bin:/home/runner/.dotnet/tools:/snap/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin&quot;</code></pre><p>If you launch julia from the shell, this variable is automatically populated with the same <code>$PATH</code>, so if you can access <code>humann</code> or <code>metaphlan</code> from your shell, then launch julia, you should be all set (eg, if you&#39;ve installed them with miniconda, and you do <code>conda activate envname</code>, then launch julia from the same shell, they should already be available).</p><p>If not, you need to identify where <code>humann</code> or <code>metaphlan</code> executables are located, then add that location to <code>ENV[&quot;PATH&quot;]</code> (delimeted by <code>:</code>). For example, if the <code>humann</code> executable is found at <code>/home/kevin/.local/bin</code>, you would run:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; ENV[&quot;PATH&quot;] = ENV[&quot;PATH&quot;] * &quot;:&quot; * &quot;/home/kevin/.local/bin&quot;</code><code class="nohighlight hljs ansi" style="display:block;">&quot;/home/runner/.local/bin:/opt/pipx_bin:/home/runner/.cargo/bin:/home/runner/.config/composer/vendor/bin:/usr/local/.ghcup/bin:/home/runner/.dotnet/tools:/snap/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/home/kevin/.local/bin&quot;</code></pre><p>If you don&#39;t know where your installation is located, from the terminal, you can use the <code>which</code> command:</p><pre><code class="language-sh hljs">$ which humann
/home/kevin/.local/bin/humann</code></pre><h3 id="using-conda"><a class="docs-heading-anchor" href="#using-conda">Using Conda.jl</a><a id="using-conda-1"></a><a class="docs-heading-anchor-permalink" href="#using-conda" title="Permalink"></a></h3><p>If you don&#39;t have a previous installation, you can use <a href="https://github.com/JuliaPy/Conda.jl"><code>Conda.jl</code></a> to install the necessary tools.</p><p>This can be done automatically for you using <a href="#BiobakeryUtils.install_deps-Tuple{}"><code>BiobakeryUtils.install_deps()</code></a>.</p><pre><code class="language-julia-repl hljs">julia&gt; BiobakeryUtils.install_deps()
[ Info: Running conda create -y -p /home/kevin/.julia/conda/3/envs/BiobakeryUtils in root environment
Collecting package metadata (current_repodata.json): done
Solving environment: done

## Package Plan ##

  environment location: /home/kevin/.julia/conda/3/envs/BiobakeryUtils



Preparing transaction: done
Verifying transaction: done
Executing transaction: **done**
# ... etc</code></pre><article class="docstring"><header><a class="docstring-binding" id="BiobakeryUtils.install_deps-Tuple{}" href="#BiobakeryUtils.install_deps-Tuple{}"><code>BiobakeryUtils.install_deps</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">install_deps([env]; [force=false])</code></pre><p>Uses Conda.jl to install HUMAnN and MetaPhlAn. In order to use the commandline tools, you must have the conda environment bin directory in <code>ENV[&quot;PATH&quot;]</code>. See &quot;<a href="#using-conda">Using Conda</a>&quot; for more information.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/EcoJulia/BiobakeryUtils.jl/blob/9a753ffe060f4da5f0c433c3580e7b3fed7c8f1c/src/utils.jl#L1-L8">source</a></section></article><p>Or you can do it manually. First install <code>Conda.jl</code> in your environment using the Pkg REPL (accessible by typing <code>]</code> in the julia REPL - press <code>&lt;backspace&gt;</code> to get back to the regular REPL).</p><pre><code class="language-plaintext hljs">$ cd my_project/

$ julia --project
               _
   _       _ _(_)_     |  Documentation: https://docs.julialang.org
  (_)     | (_) (_)    |
   _ _   _| |_  __ _   |  Type &quot;?&quot; for help, &quot;]?&quot; for Pkg help.
  | | | | | | |/ _` |  |
  | | |_| | | | (_| |  |  Version 1.6.1 (2021-04-23)
 _/ |\__&#39;_|_|_|\__&#39;_|  |  Official https://julialang.org/ release
|__/                   |

julia&gt; # press &#39;]&#39;

(my_project) pkg&gt; add Conda
    Updating registry at `~/.julia/registries/General`
   Resolving package versions...
    Updating `~/.julia/dev/BiobakeryUtils/my_project/Project.toml`
  [8f4d0f93] + Conda v1.5.2
    Updating `~/.julia/dev/BiobakeryUtils/my_project/Manifest.toml`
  [8f4d0f93] + Conda v1.5.2
  [682c06a0] + JSON v0.21.2
  [69de0a69] + Parsers v2.0.4
  [81def892] + VersionParsing v1.2.0
  [ade2ca70] + Dates
  [a63ad114] + Mmap
  [de0858da] + Printf
  [4ec0a83e] + Unicode

julia&gt; using Conda</code></pre><p>First, you&#39;ll need to add &quot;channels&quot; to a new Conda environment. The order here is important. Assuming you want your environment to be called <code>biobakery</code>:</p><pre><code class="language-julia-repl hljs">julia&gt; Conda.add_channel(&quot;bioconda&quot;, :biobakery)
┌ Info: Running conda config --add channels bioconda --file /home/kevin/.julia/conda/3/envs/biobakery/condarc-julia.yml --force
└ in biobakery environment
# ...

julia&gt; Conda.add_channel(&quot;conda-forge&quot;, :biobakery)
┌ Info: Running conda config --add channels conda-forge --file /home/kevin/.julia/conda/3/envs/biobakery/condarc-julia.yml
└ --force in biobakery environment
# ...

julia&gt; Conda.add(&quot;humann&quot;, :biobakery)
[ Info: Running conda install -y -c bioconda humann in biobakery environment
Collecting package metadata (current_repodata.json): done
Solving environment: done
# ...

julia&gt; Conda.add(&quot;metaphlan&quot;, :biobakery; channel=&quot;bioconda&quot;)
[ Info: Running conda install -y -c bioconda metaphlan in biobakery environment
Collecting package metadata (current_repodata.json): done
Solving environment: done
# ...</code></pre><p><a href="https://asciinema.org/a/bahBYyfDyLoETR0qf1cQl7Stb"><img src="https://asciinema.org/a/bahBYyfDyLoETR0qf1cQl7Stb.svg" alt="asciicast"/></a></p><p>By default, <code>Conda.jl</code> puts environments into <code>~/.julia/conda/envs/&lt;env name&gt;/bin</code>, which you can get with <code>Conda.bin_dir()</code>, so in this case, you&#39;d next want to run</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; ENV[&quot;PATH&quot;] = ENV[&quot;PATH&quot;] * &quot;:&quot; * Conda.bin_dir(:BiobakeryUtils)</code><code class="nohighlight hljs ansi" style="display:block;">ERROR: UndefVarError: Conda not defined</code></pre><p>Note 1: if you need to manually edit <code>ENV[&quot;PATH&quot;]</code> like this, you&#39;ll need to do this each time you load julia. To get around this, you can modify you shell&#39;s <code>$PATH</code> variable, or use <a href="https://direnv.net"><code>direnv</code></a> to set it on a per-directory basis.</p><p>Note 2: If following this docs you get ERROR: UndefVarError: Conda not defined<code>try installing and loading</code>Conda.jl </p><h2 id="Using-MetaPhlAn-and-HUMAnN"><a class="docs-heading-anchor" href="#Using-MetaPhlAn-and-HUMAnN">Using MetaPhlAn and HUMAnN</a><a id="Using-MetaPhlAn-and-HUMAnN-1"></a><a class="docs-heading-anchor-permalink" href="#Using-MetaPhlAn-and-HUMAnN" title="Permalink"></a></h2><p>You should now be ready to start using MetaPhlAn and HUMAnN from julia! Take a look at the <a href="../metaphlan/#metaphlan-tutorial">MetaPhlAn tutorial</a> or <a href="../humann/#humann-tutorial">HUMAnN tutorial</a> for next steps.</p><h2 id="Troubleshooting"><a class="docs-heading-anchor" href="#Troubleshooting">Troubleshooting</a><a id="Troubleshooting-1"></a><a class="docs-heading-anchor-permalink" href="#Troubleshooting" title="Permalink"></a></h2><p>So, you followed all the steps above, and you&#39;re still having problems? There are a couple of common things that can go wrong.</p><h3 id="Cannot-find-{program}"><a class="docs-heading-anchor" href="#Cannot-find-{program}">Cannot find <code>{program}</code></a><a id="Cannot-find-{program}-1"></a><a class="docs-heading-anchor-permalink" href="#Cannot-find-{program}" title="Permalink"></a></h3><p>If you get an error that looks like this:</p><pre><code class="nohighlight hljs">┌ Error: Can not find metaphlan! If you think it should be
│ installed, try running:
│
│ ENV[&quot;PATH&quot;] = ENV[&quot;PATH&quot;] * &quot;:&quot; * Conda.bin_dir(env)
│
│
│ Where env is something like :BiobakeryUtils.
└ @ BiobakeryUtils /home/kevin/.julia/dev/BiobakeryUtils/src/uti
ls.jl:55
ERROR: failed process: Process(`which metaphlan`, ProcessExited(
1)) [1]</code></pre><p>Then the relevant program is not being found in your <code>ENV[&quot;PATH&quot;]</code>.</p><h4 id=".-Check-that-path-to-biobakery-executables-is-in-ENV[&quot;PATH&quot;]"><a class="docs-heading-anchor" href="#.-Check-that-path-to-biobakery-executables-is-in-ENV[&quot;PATH&quot;]">1. Check that path to biobakery executables is in <code>ENV[&quot;PATH&quot;]</code></a><a id=".-Check-that-path-to-biobakery-executables-is-in-ENV[&quot;PATH&quot;]-1"></a><a class="docs-heading-anchor-permalink" href="#.-Check-that-path-to-biobakery-executables-is-in-ENV[&quot;PATH&quot;]" title="Permalink"></a></h4><p>At the julia REPL, just enter <code>ENV[&quot;PATH&quot;]</code> and press &lt;kbd&gt;Enter&lt;/kbd&gt;.</p><pre><code class="language-julia-repl hljs">julia&gt; ENV[&quot;PATH&quot;]
&quot;/home/kevin/.local/bin:/home/kevin/.cargo/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:
/bin&quot;</code></pre><p>Somewhere in the string should be your conda installation.</p><p>If not, follow the advice in the error message; that is, run <code>ENV[&quot;PATH&quot;] = ENV[&quot;PATH&quot;] * &quot;:&quot; * Conda.bin_dir(env)</code>, where <code>env</code> in the call to <code>Conda.bin_dir()</code> is the name of your environment (if you installed things with <code>BiobakeryUtils.install_deps()</code>, the default is <code>:BiobakeryUtils</code>).</p><p>Alternatively, if you didn&#39;t use <code>Conda.jl</code> or <code>BiobakeryUtils.install_deps()</code>, and have a different conda installation you&#39;re using, replace <code>Conda.bin_dir(env)</code> with the path, eg <code>ENV[&quot;PATH&quot;] = ENV[&quot;PATH&quot;] * &quot;:&quot; * &quot;/Users/yourname/miniconda3/envs/biobakery/bin&quot;</code>.</p><h4 id="environment-conflict"><a class="docs-heading-anchor" href="#environment-conflict">2. Check if a different installation is interfering</a><a id="environment-conflict-1"></a><a class="docs-heading-anchor-permalink" href="#environment-conflict" title="Permalink"></a></h4><p>To find a program to run, the shell looks through your <code>PATH</code> variable at each directory for a matching program. For example, if your <code>ENV[&quot;PATH&quot;]</code> looks like:</p><pre><code class="language-julia hljs">&quot;/Users/yourname/miniconda3/envs/other_project/bin:/usr/bin/:/Users/yourname/.julia/conda/3/envs/BiobakeryUtils/bin&quot;</code></pre><p>The shell will look in this order:</p><ol><li><code>/Users/yourname/miniconda3/envs/other_project/bin</code></li><li><code>/usr/bin/</code></li><li><code>/Users/yourname/.julia/conda/3/envs/BiobakeryUtils/bin</code></li></ol><p>If, for example, you have <code>metaphlan</code> installed in (1) <code>other_project/bin</code>, but intend to use (3) <code>BiobakeryUtils/bin</code>, you might run into issues. In this case, you can add (3) to the front of your path so that it&#39;s reached first, eg:</p><pre><code class="language-julia-repl hljs">ENV[&quot;PATH&quot;] = &quot;/Users/yourname/.julia/conda/3/envs/BiobakeryUtils/bin&quot; * &quot;:&quot; * ENV[&quot;PATH&quot;]</code></pre><h3 id="Error-involving-bowtie2"><a class="docs-heading-anchor" href="#Error-involving-bowtie2">Error involving bowtie2</a><a id="Error-involving-bowtie2-1"></a><a class="docs-heading-anchor-permalink" href="#Error-involving-bowtie2" title="Permalink"></a></h3><p>If you run <code>metaphlan()</code> or <code>humann()</code>, things start out looking ok, then you get a long error message that includes something like</p><pre><code class="nohighlight hljs">subprocess.CalledProcessError: Command &#39;[&#39;bowtie2-build&#39;, &#39;--usage&#39;]&#39; returned non-zero exit status 250.
ERROR: failed process: Process(`metaphlan samplename.fasta samplename_profile.tsv --input_type fasta`, ProcessExited(1)) [1]</code></pre><p>buried in the stack trace, you probably have a problem with <code>tbb</code>.</p><p>The default bowtie2 installation installs a version of <code>tbb</code> that doesn&#39;t work properly, so you need to pin it to an earlier version to make it work (<a href="https://www.biostars.org/p/494922/">see here</a>).</p><p>If you installed using <code>BiobakeryUtils.install_deps()</code>, this should have been done already, and you might be having <a href="#environment-conflict">this problem</a>.</p><p>If you used a different installation method, you can try</p><pre><code class="language-sh hljs">$ conda install tbb=2020.2</code></pre><p>or </p><pre><code class="language-julia-repl hljs">julia&gt; Conda.add(&quot;tbb=2020.2&quot;, env; channel=&quot;conda-forge&quot;)</code></pre><p>(replace <code>env</code> with the name of your conda environment)</p><h3 id="Still-having-issues?"><a class="docs-heading-anchor" href="#Still-having-issues?">Still having issues?</a><a id="Still-having-issues?-1"></a><a class="docs-heading-anchor-permalink" href="#Still-having-issues?" title="Permalink"></a></h3><p>If your issue isn&#39;t addressed here, or you&#39;re still having problems, please <a href="https://github.com/EcoJulia/BiobakeryUtils.jl/issues/new/choose">open an issue</a> or start a discussion over on <a href="https://github.com/EcoJulia/Microbiome.jl/discussions/new"><code>Microbiome.jl</code></a>.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« BiobakeryUtils</a><a class="docs-footer-nextpage" href="../kneaddata/">Working with KneadData »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.24 on <span class="colophon-date" title="Thursday 2 February 2023 03:03">Thursday 2 February 2023</span>. Using Julia version 1.8.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
